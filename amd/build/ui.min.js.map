{"version":3,"file":"ui.min.js","sources":["../src/ui.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny edu-sharing Content configuration.\n *\n * @module      tiny_edusharing/commands\n * @copyright   2022 metaVentis GmbH <http://metaventis.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {component} from './common';\nimport {getCourseId, getRepoTarget, getRepoUrl} from './options';\n\nimport {renderForPromise} from 'core/templates';\nimport Modal from 'tiny_edusharing/modal';\nimport ModalEvents from 'core/modal_events';\nimport ModalFactory from 'core/modal_factory';\nimport {getTicket} from \"./repository\";\nimport Config from 'core/config';\n\nlet openingSelection = null;\n\nexport const handleAction = (editor) => {\n    openingSelection = editor.selection.getBookmark();\n    displayDialogue(editor);\n};\n\nexport const initInstructionGif = () => {\n    const gif = window.document.getElementById('eduInstructionGif');\n    if (gif === null) {\n        return;\n    }\n    const relativePath = gif.getAttribute('src');\n    const absolutePath = Config.wwwroot + relativePath;\n    gif.setAttribute('src', absolutePath);\n};\n\nconst handleInsertSubmission = async(editor) => {\n    const nodeJson = window.document.getElementById('edusharing_node').value;\n    const node = JSON.parse(nodeJson);\n    const version = window.document.querySelector('input[name=\"eduVersion\"]:checked').value;\n    const caption = window.document.getElementById('captionInput').value;\n    const alignment = window.document.querySelector('input[name=\"eduAlignment\"]:checked').value;\n    const width = window.document.getElementById('eduWidth').value;\n    const height = window.document.getElementById('eduHeight').value;\n    let style = '';\n    if (alignment !== 'none') {\n        style = 'float:' + alignment + ';';\n    }\n    if (node.mediatype === 'folder') {\n        style = 'display:block;';\n    }\n\n    let title = node.title || node.name;\n\n    let url = new URL(node.previewUrl);\n    url.searchParams.set('caption', caption);\n    url.searchParams.set('object_url', node.objectUrl);\n    url.searchParams.set('mediatype', node.mediatype);\n    url.searchParams.set('mimetype', node.mimetype);\n    url.searchParams.set('window_version', version);\n    url.searchParams.set('title', title);\n\n    let img = false;\n    let ref = false;\n\n    if (node.mediatype === 'ref') {\n        ref = true;\n    } else {\n        img = true;\n        url.searchParams.set('width', width.toString());\n        url.searchParams.set('height', height.toString());\n    }\n\n    const content = await renderForPromise(`${component}/content`, {\n        edusharingImg: img,\n        edusharingRef: ref,\n        edusharingPreviewSrc: url.toString(),\n        edusharingTitle: title.toString(),\n        edusharingCaption: caption.toString(),\n        edusharingWidth: width.toString(),\n        edusharingHeight: height.toString(),\n        edusharingStyle: style\n    });\n\n    editor.selection.moveToBookmark(openingSelection);\n    editor.execCommand('mceInsertContent', false, content.html);\n    editor.selection.moveToBookmark(openingSelection);\n};\n\nconst displayDialogue = async(editor) => {\n    const prepareEditModal = () => {\n        const addEditSubmitHandler = () => {\n            $root.on(ModalEvents.save, () => {\n                currentEdusharing.querySelector('.edusharing_caption')\n                    .innerHTML = window.document.getElementById('captionInput').value ?? \"\";\n                const inputAlignment = window.document.querySelector('input[name=\"eduAlignment\"]:checked').value;\n                const hasAlignmentChanged = inputAlignment !== alignment;\n                if (hasAlignmentChanged) {\n                    if (inputAlignment === 'none') {\n                        currentEdusharing.style.removeProperty('float');\n                        currentEdusharing.setAttribute('data-mce-style', \"\");\n                    } else {\n                        currentEdusharing.style.float = inputAlignment;\n                        currentEdusharing.setAttribute('data-mce-style', 'float: ' + inputAlignment + ';');\n                    }\n                }\n                let hasSizeChanged = false;\n                if (isSizeEditable) {\n                    const inputWidth = window.document.getElementById('eduWidth').value;\n                    const inputHeight = window.document.getElementById('eduHeight').value;\n                    hasSizeChanged = inputHeight !== height || inputWidth !== width;\n                    if (hasSizeChanged) {\n                        eduImage.setAttribute('width', inputWidth);\n                        eduImage.setAttribute('height', inputHeight);\n                        url.searchParams.set('width', inputWidth);\n                        url.searchParams.set('height', inputHeight);\n                    }\n                }\n                if (hasAlignmentChanged || hasSizeChanged) {\n                    eduImage.setAttribute('src', url.toString());\n                    eduImage.setAttribute('data-edited', 1);\n                }\n            });\n        };\n        const submitButton = window.document.getElementById('eduSubmitButton');\n        submitButton.disabled = false;\n        submitButton.innerHTML = submitButton.getAttribute('data-secondary-title');\n        let isSizeEditable = true;\n        const modalTitle = root.querySelector('.modal-title');\n        modalTitle.innerHTML = modalTitle.querySelector('input').value;\n        const nodeOptionsForm = window.document.getElementById('nodeOptionsForm');\n        window.document.getElementById('repoButtonContainer').classList.add('d-none');\n        nodeOptionsForm.classList.remove('d-none');\n        const eduImage = currentEdusharing.querySelector(\"img.edusharing_atto\");\n        if (eduImage === null || eduImage === undefined) {\n            root.querySelector('.mform').classList.add('d-none');\n            root.getElementById('eduNoEditInfo').classList.remove('d-none');\n            root.getElementById('eduSubmitButton').classList.add('d-none');\n            return;\n        }\n        const objectUrl = eduImage.getAttribute('src');\n        window.document.getElementById('eduPreviewImage').setAttribute('src', objectUrl);\n        let url = new URL(objectUrl);\n        const mediaType = url.searchParams.get('mediatype');\n        let width = 600;\n        let height = 400;\n        if (!hideSizeOptions(mediaType)) {\n            width = parseInt(eduImage.getAttribute('width') ?? 600);\n            height = parseInt(eduImage.getAttribute('height') ?? 400);\n            initSizeCalculation(width, height);\n        } else {\n            isSizeEditable = false;\n        }\n        window.document.querySelectorAll(\".eduVersionRadio\").forEach(item => item.classList.add('d-none'));\n        window.document.getElementById('captionInput').value = currentEdusharing.querySelector('.edusharing_caption').innerHTML;\n        window.document.getElementById('eduContentTitle').innerHTML = url.searchParams.get('title');\n        const alignment = currentEdusharing.style.float ?? 'none';\n        if (alignment !== 'none') {\n            window.document.getElementById('eduAlignment' + (alignment === 'right' ? '2' : '1')).checked = true;\n        }\n        addEditSubmitHandler();\n    };\n    const prepareInsertModal = () => {\n        root.addEventListener('click', (e) => {\n            const openRepoButton = e.target.closest('[data-target=\"edusharing\"]');\n            if (openRepoButton) {\n                const repoUrl = getRepoUrl(editor);\n                openRepo(repoUrl, getRepoTarget(editor), getCourseId(editor));\n                window.addEventListener(\"message\", applyNodeListener);\n            }\n        });\n        const applyNodeListener = event => {\n            if (event.data.event === \"APPLY_NODE\") {\n                const node = event.data.data;\n                const width = node.properties['ccm:width'] !== undefined ? Math.round(node.properties['ccm:width'][0]) : 600;\n                const height = node.properties['ccm:height'] !== undefined ? Math.round(node.properties['ccm:height'][0]) : 400;\n                window.win.close();\n                checkVersioning(node);\n                window.document.getElementById('repoButtonContainer').classList.add('d-none');\n                window.document.getElementById('nodeOptionsForm').classList.remove('d-none');\n                window.document.getElementById('eduContentTitle').innerHTML = node.name ?? node.title;\n                window.document.getElementById('eduPreviewImage')\n                    .setAttribute('src', node.preview.url);\n                hideSizeOptions(node.mediatype);\n                hideCaptionInput(node.mediatype);\n                initSizeCalculation(width, height);\n                setNodeData(node);\n                window.document.getElementById('eduSubmitButton').disabled = false;\n            }\n        };\n    };\n    const selection = editor.selection.getNode();\n    const currentEdusharing = selection.closest('.edusharing-placeholder');\n    const isEditMode = currentEdusharing !== null;\n\n    const modal = await ModalFactory.create({\n        type: Modal.TYPE,\n        large: true,\n        removeOnClose: true\n    });\n    modal.show();\n\n    const $root = modal.getRoot();\n    const root = $root[0];\n    if (isEditMode) {\n        prepareEditModal();\n    } else {\n        prepareInsertModal();\n        $root.on(ModalEvents.save, () => {\n            handleInsertSubmission(editor);\n        });\n    }\n};\n\nconst hideSizeOptions = mediaType => {\n    const mediaTypesWithoutSizeChoice = ['file-word', 'file-pdf', 'file-odt', 'file-audio', 'file-pdf', 'link'];\n    if (mediaTypesWithoutSizeChoice.includes(mediaType)) {\n        window.document.getElementById('eduWidthContainer').classList.add('d-none');\n        return true;\n    }\n    return false;\n};\n\nconst hideCaptionInput = mediaType => {\n    if (mediaType === \"ref\") {\n        window.document.getElementById(\"eduCaptionContainer\").classList.add('d-none');\n    }\n};\n\nconst initSizeCalculation = (width, height) => {\n    if (width === 0 || height === 0) {\n        return;\n    }\n    const aspectRatio = width / height;\n    const heightInput = window.document.getElementById('eduHeight');\n    const widthInput = window.document.getElementById('eduWidth');\n    widthInput.value = width;\n    heightInput.value = height;\n    widthInput.addEventListener('keyup', event => recalculateDimensions(event));\n    widthInput.addEventListener('change', event => recalculateDimensions(event));\n    heightInput.addEventListener('keyup', event => recalculateDimensions(event));\n    heightInput.addEventListener('change', event => recalculateDimensions(event));\n    const recalculateDimensions = (event) => {\n        if (event.target.id === 'eduHeight') {\n            widthInput.value = Math.round(heightInput.value * aspectRatio);\n        } else {\n            heightInput.value = Math.round(widthInput.value / aspectRatio);\n        }\n    };\n};\n\nconst checkVersioning = (node) => {\n    const hasVersion = node.properties['cclom:version'] !== undefined;\n    if (node.aspects.includes('ccm:published') || node.aspects.includes('ccm:collection_io_reference') || !hasVersion) {\n        window.document.querySelectorAll(\".eduVersionRadio\")\n            .forEach(item => item.classList.add('d-none'));\n    }\n    if (hasVersion) {\n        window.document.getElementById('eduversion2').value = node.properties['cclom:version'][0];\n    }\n};\n\nconst setNodeData = node => {\n    const nodeData = {\n        mimetype: node.mimetype,\n        mediatype: node.mediatype,\n        title: node.title,\n        objectUrl: node.objectUrl,\n        name: node.name,\n        previewUrl: node.preview.url\n    };\n    window.document.getElementById('edusharing_node').value = JSON.stringify(nodeData);\n};\n\nconst openRepo = (repoUrl, repoTarget, courseId) => {\n    window.win = window.open();\n    window.win.document.write('Loading edu-sharing ticket...');\n    switch (repoTarget) {\n        case 'collections':\n            repoTarget = '/components/collections';\n            break;\n        case 'workspace':\n            repoTarget = '/components/workspace/files';\n            break;\n        default:\n            repoTarget = '/components/search';\n    }\n    const ajaxParams = {\n        eduTicketStructure: {\n            courseId: courseId\n        }\n    };\n    getTicket(ajaxParams)\n        .then(response => {\n            repoUrl += repoTarget + '?reurl=WINDOW&applyDirectories=true&ticket=' + response.ticket;\n            window.win.location.href = repoUrl;\n            return null;\n        })\n        .fail(() => window.document.write('Error loading ticket.'));\n};\n"],"names":["openingSelection","editor","selection","getBookmark","displayDialogue","gif","window","document","getElementById","relativePath","getAttribute","absolutePath","Config","wwwroot","setAttribute","async","currentEdusharing","getNode","closest","isEditMode","modal","ModalFactory","create","type","Modal","TYPE","large","removeOnClose","show","$root","getRoot","root","submitButton","disabled","innerHTML","isSizeEditable","modalTitle","querySelector","value","nodeOptionsForm","classList","add","remove","eduImage","objectUrl","url","URL","mediaType","searchParams","get","width","height","hideSizeOptions","parseInt","initSizeCalculation","querySelectorAll","forEach","item","alignment","style","float","checked","on","ModalEvents","save","inputAlignment","hasAlignmentChanged","removeProperty","hasSizeChanged","inputWidth","inputHeight","set","toString","prepareEditModal","addEventListener","e","target","repoUrl","openRepo","applyNodeListener","event","data","node","undefined","properties","Math","round","win","close","checkVersioning","name","title","preview","mediatype","hideCaptionInput","setNodeData","prepareInsertModal","nodeJson","JSON","parse","version","caption","previewUrl","mimetype","img","ref","content","component","edusharingImg","edusharingRef","edusharingPreviewSrc","edusharingTitle","edusharingCaption","edusharingWidth","edusharingHeight","edusharingStyle","moveToBookmark","execCommand","html","handleInsertSubmission","includes","aspectRatio","heightInput","widthInput","recalculateDimensions","id","hasVersion","aspects","nodeData","stringify","repoTarget","courseId","open","write","ajaxParams","eduTicketStructure","then","response","ticket","location","href","fail"],"mappings":"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"}